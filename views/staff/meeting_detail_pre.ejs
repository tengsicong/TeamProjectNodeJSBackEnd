<%- include('header') %>

<!-- main content start-->
<div id="page-wrapper">
    <div class="main-page">
        <h2 class="title1">Meeting Details</h2>
        <div class="blank-page widget-shadow scroll">
            <h3><b>Meeting <%= meeting.MeetingNumber%></b></h3>
            <br>
            <div class="panel panel-info">
                <div class="panel-heading">
                    <h3 class="panel-title"> Meeting info</h3>
                </div>
                <div class="panel-body">
                    <table>
                        <tr width="500px"><p><b>Client : </b> <%= meeting.GroupID.ProposalID.ClientID.Name %> </p></tr>
                        <tr width="500px"><p><b>Supervisor : </b> <%= meeting.StaffID.Name %> </tr>
                        <tr width="500px"><p><b>Team : </b> <%= meeting.GroupID.TeamName %> </tr>
                        <tr width="500px"><p><b>Date : </b> <%= meeting.Date %> </tr>
                        <tr width="500px"><p><b>Venue : </b> <%= meeting.Place %> </tr>
                    </table>
                </div>
            </div>
        </div>
        <br>
        <div class="blank-page widget-shadow scroll">
            <h3><b>Change Meeting Details</b></h3>
            <br>
            <% if (meeting.TemporaryStaffID == undefined) {%>
                <div class="panel panel-success request-info">
                    <div class="panel-heading">
                        <h3 class="panel-title">This meeting will be held on schedule.</h3>
                    </div>
                </div>
            <% } else if (meetingModify.Status == "approved"){%>
                <div class="panel panel-success request-info">
                    <div class="panel-heading">
                        <h3 class="panel-title">Your last request has been approved</h3>
                    </div>
                    <div class="panel-body">
                        <table style="width: 90%; margin: auto;">
                            <tr>
                                <th style = "width: 10%;">Date</th>
                                <% if(meetingModify.NewMeetingTime == null) { %>
                                    <td style="padding: 0.5em;"><p>Time hasn't been changed</p></td>
                                <%} else {%>
                                    <td style="padding: 0.5em;"><p><%= meeting.Date%> → <%= meetingModify.NewMeetingTime%></p></td>
                                <% } %>
                            </tr>
                            <tr>
                                <th style = "width: 10%;">Supervisor</th>
                                <% if(meetingModify.NewStaffID == null) { %>
                                    <td style="padding: 0.5em;"><p>Staff hasn't been changed</p></td>
                                <%} else {%>
                                    <td style="padding: 0.5em;"><p><%= meetingModify.StaffID.Name%> → <%= meetingModify.NewStaffID.Name%></p></td>
                                <% } %>
                            </tr>
                            <tr>
                                <th style = "width: 10%;">Reason</th>
                                <td style="padding: 0.5em;"><p><%= meetingModify.RequestComment.Content%>
                            </tr>
                            <tr>
                                <th style = "width: 10%;">Status</th>
                                <td style="padding: 0.5em;"><p><%= meetingModify.Status%></p></td>
                            </tr>
                        </table>
                    </div>
                </div>
            <% } else {%>
                <div class="panel panel-warning request-info">
                    <div class="panel-heading">
                        <h3 class="panel-title">Your last request not been approved</h3>
                    </div>
                    <div class="panel-body">
                        <table style="width: 90%; margin: auto;">
                            <tr>
                                <th style = "width: 10%;">Date</th>
                                <% if(meetingModify.NewMeetingTime == null) { %>
                                    <td style="padding: 0.5em;"><p>Time hasn't been changed</p></td>
                                <%} else {%>
                                    <td style="padding: 0.5em;"><p><%= meeting.Date%> → <%= meetingModify.NewMeetingTime%></p></td>
                                <% } %>
                            </tr>
                            <tr>
                                <th style = "width: 10%;">Supervisor</th>
                                <% if(meetingModify.NewStaffID == null) { %>
                                    <td style="padding: 0.5em;"><p>Staff hasn't been changed</p></td>
                                <%} else {%>
                                    <td style="padding: 0.5em;"><p><%= meetingModify.StaffID.Name%> → <%= meetingModify.NewStaffID.Name%></p></td>
                                <% } %>
                            </tr>
                            <tr>
                                <th style = "width: 10%;">Reason</th>
                                <td style="padding: 0.5em;"><p><%= meetingModify.RequestComment.Content%>
                            </tr>
                            <tr>
                                <th style = "width: 10%;">Status</th>
                                <td style="padding: 0.5em;"><p><%= meetingModify.Status%></p></td>
                            </tr>
                        </table>
                    </div>
                </div>
            <% } %>
            <div class="form-group row1 blank-page widget-shadow scroll" >
                <form method="post">
                    <table style="width: 90%; margin: auto;">
                        <tr>
                            <th style = "width: 15%;">Change Date</th>
                            <td style="padding: 0.5em;"><input name="timechange" type="datetime-local" style="width: 30%" value=nowtime></td>
                        </tr>
                        <tr>
                            <th style = "width: 15%;">Change Supervisor</th>
                            <td style="padding: 0.5em;">
                                <select name="staffchange" class="form-control" style="width: 30%">
                                    <% for(var i=0;i<stafflist.length;i++) { %>
                                        <%if(stafflist[i].StaffID == nowstaff ) {%>
                                            <option selected><%= stafflist[i].Name%></option>
                                        <% } else {%>
                                            <option><%= stafflist[i].Name%></option>
                                        <% } %>
                                    <% } %>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th style = "width: 15%;">Reason</th>
                            <td style="padding: 0.5em;">
                                <textarea name="changereason" class= "input-reply-area" placeholder="Change timetable reason" wrap="virtual" style="width: 80%; height: 6.0em; resize: none;"></textarea>
                            </td>
                        </tr>
                    </table>
                    <button type="submit" class="btn btn-primary" style="margin-left: 90%" value=" SUBMIT">Submit</button>
                </form>
            </div>
        </div>
    </div>
</div>

<%- include('footer') %>
